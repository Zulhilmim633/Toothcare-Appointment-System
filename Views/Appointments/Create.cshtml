@model Toothcare_Appointment_System.Models.AppointmentDTO

<h2>Create New Appointment</h2>

<form asp-action="Create" method="post">
	<div class="form-group">
		<label asp-for="AppointmentDateTime" class="control-label">Name</label>
		<input asp-for="AppointmentDateTime" class="form-control" type="date" />
		<span asp-validation-for="AppointmentDateTime" class="text-danger"></span>
	</div>
	<div class="form-group">
		<label asp-for="AppointmentReason" class="control-label">Reason</label>
		<textarea asp-for="AppointmentReason" class="form-control"></textarea>
		<span asp-validation-for="AppointmentReason" class="text-danger"></span>
	</div>
	<div class="form-group">
		<label asp-for="AppointmentStatus" class="control-label">Status</label>
		<select asp-for="AppointmentStatus" class="form-control">
			<option value="Scheduled">Scheduled</option>
			<option value="Confirmed">Confirmed</option>
			<option value="Cancelled">Cancelled</option>
			<option value="Completed">Completed</option>
		</select>
		<span asp-validation-for="AppointmentStatus" class="text-danger"></span>
	</div>

	<div class="form-group">
		<label asp-for="DoctorID">Doctor</label>
		<select asp-for="DoctorID" class="form-control">
			@foreach (var doctor in (List<Toothcare_Appointment_System.Models.Doctors>)ViewData["Doctors"])
			{
				<option value="@doctor.DoctorID">@doctor.DoctorName</option>
			}
		</select>
	</div>

	<div class="form-group">
		<label asp-for="ICNumber">Patient</label>
		<input id="filterPatient" onkeyup="updatePatient()" placeholder="Search for patient" title="Type Patient Name" />
		<select asp-for="ICNumber" class="form-control">
			@foreach (var patient in (List<Toothcare_Appointment_System.Models.Patients>)ViewData["Patients"])
			{
				<option value="@patient.ICNumber">@patient.PatientName</option>
			}
		</select>
	</div>

	<div class="form-group">
		<label asp-for="AppointmentType" class="control-label">Type</label>
		<input asp-for="AppointmentType" class="form-control" />
		<span asp-validation-for="AppointmentType" class="text-danger"></span>
	</div>

	<button type="submit" class="btn btn-primary">Create</button>
	<a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>

<script>
	function updatePatient(){
		var input, filter, option, i;
		input = document.getElementById("filterPatient");
		filter = input.value.toUpperCase();
		option = document.getElementsByTagName("option");
		for (i = 0; i < option.length; i++) {
			if (option[i].innerHTML.toUpperCase().indexOf(filter) > -1 || option[i].value.indexOf(filter) >-1) {
				option[i].style.display = "";
			} else {
				option[i].style.display = "none";
			}
		}
	}
</script>